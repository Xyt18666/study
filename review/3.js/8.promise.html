<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <title>Document</title>
  </head>
  <body></body>
  <script>
    /*

    promise:
        Promise构造函数接受一个函数作为参数，该函数的两个参数分别是resolve和reject。js引擎自带，不用自己部署。其中resolve表示成功，reject表示失败

        通过then方法，指定resolve和reject状态的回调参数

        创建： new Promise()

        方法：
            Promise.all([]).then() :Promise.all()方法用于将多个 Promise 实例，包装成一个新的 Promise 实例。在所有的promise操作都成功时才会执行成功的回调。参数是一个数组，把所有的操作放到数组中。

            Promise.race():和all用法一致，规则不同，只要有一个操作成功就会执行成功的回调。成功的回调只显示第一次成功的内容。

    */
    {
      let prom = new Promise((resolve, reject) => {
        $.ajax({
          url: "http://musicapi.leanapp.cn/dj/program?rid=336355127",
          data: "",
          type: "get",
          dataType: "json",
          success: function (e) {
            console.log(e);
            console.log("获取数据");
          },
          error() {
            console.log("错误");
          },
        });
      });
      prom
        .then((res) => {
          console.log("成功");
        })
        .catch((rej) => {
          console.log("失败");
        })
        .finally(() => {
          console.log("结束");
        });
    }
  </script>
</html>
