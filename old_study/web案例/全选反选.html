<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		span{
			float: left;
			width: 20px;
			height: 20px;
			border:2px solid #ccc;
		}
		h3{
			margin-bottom: 20px;
			width: 80px;
			height: 50px;
		}
		h4{
			width: 80px;
			height: 50px;
		}
	</style>
</head>
<body>
	<h3>全选<span></span></h3>
	<h4>单选1<span></span></h4>
	<h4>单选2<span></span></h4>
	<h4>单选3<span></span></h4>
	<h4>单选4<span></span></h4>
	<h4>单选5<span></span></h4>
	<h4>单选6<span></span></h4>
</body>
<script>
$("h4 span,h3 span").attr("che","false")
tab()
$("h3").click(function(){
	$("h3 span").attr("che",$("h3 span").attr("che")=="true"?"false":"true")
	$("h4 span").attr("che",$("h3 span").attr("che"))
	tab()
})
$("h4").click(function(){
	$(this).children("span").attr("che",$(this).children("span").attr("che")=="true"?"false":"true")
	var yes=$("h4 span[che='true']").length
	var all=$("h4 span").length
	console.log(yes,all)
	$("h3 span").attr("che",yes==all)
	tab()
})
function tab(){
	$("h4 span[che='false'],h3 span[che='false']").css("background","#0f0")
	$("h4 span[che='true'],h3 span[che='true']").css("background","red")
}


</script>
</html>