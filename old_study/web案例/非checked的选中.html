<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		span{
			float: left;
			width: 20px;
			height: 20px;
			border:2px solid #ccc;
		}
		h3{
			margin-bottom: 20px;
			width: 80px;
			height: 50px;
		}
		h4{
			width: 80px;
			height: 50px;
		}
	</style>
</head>
<body>
	<h3>全选<span></span></h3>
	<h4>单选1<span></span></h4>
	<h4>单选2<span></span></h4>
	<h4>单选3<span></span></h4>
	<h4>单选4<span></span></h4>
	<h4>单选5<span></span></h4>
	<h4>单选6<span></span></h4>
</body>
<script>
	//绿色未选中
	//红色选中

	//基础默认属性都为false
	$("h4 span,h3 span").attr("che",false)
	tab()
	//调用样式


	$("h3").click(function(){
		//全选点击时，自定义属性che 为 true 或者 false
		$("h3 span").attr("che",$("h3 span").attr("che")=="true"?"false":"true")

		//单选的che 为 全选的 che
		$("h4 span").attr("che",$("h3 span").attr("che"))
		tab()//调用样式
	})

	$("h4").click(function(){
		//单选点击时，点击的子级的 che 属性 为 true 或者 false
		$(this).children("span").attr("che",$(this).children("span").attr("che")=="true"?"false":"true")

		//被选中的元素的数量
		var yes=$("h4 span[che='true']").length

		//总数量
		var all=$("h4 span").length
		console.log(yes,all)

		//全选的che为  两个值是否相等
		$("h3 span").attr("che",yes==all)
		tab()//调用样式
	})


	function tab(){
		//样式函数，选中为红，未选中为绿
		$("h4 span[che='false'],h3 span[che='false']").css("background","#0f0")
		$("h4 span[che='true'],h3 span[che='true']").css("background","red")
	}
</script>
</html>